trigger:
- main

pool:
  name: sadaf-self-agent

steps:
- task: CmdLine@2
  displayName: 'Create main.py dynamically'
  inputs:
    script: |
      echo print("Running ETL Script") > main.py
      echo import pandas as pd >> main.py
      echo df = pd.DataFrame({'name': ['Sadaf'], 'age': [30]}) >> main.py
      echo print(df) >> main.py

- task: CmdLine@2
  displayName: 'Install pandas'
  inputs:
    script: |
      python -m pip install pandas

- task: CmdLine@2
  displayName: 'Run ETL Script'
  inputs:
    script: |
      echo Running ETL Script
      python main.py
